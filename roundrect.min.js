(function(n,k){function y(){var a;try{z?document.namespaces.add(s,"urn:schemas-microsoft-com:vml","#default#VML"):document.namespaces.add(s,"urn:schemas-microsoft-com:vml")}catch(b){setTimeout(y,10)}try{document.execCommand("BackgroundImageCache",false,true)}catch(d){}a=document.createElement("style");document.body.appendChild(a);a.styleSheet.addRule(s+"\\:shape","behavior:url(#default#VML);display:inline-block");a.styleSheet.addRule(s+"\\:group","behavior:url(#default#VML);display:inline-block");
a.styleSheet.addRule(s+"\\:fill","behavior:url(#default#VML);display:inline-block")}function o(a,b){if(a[u]&&q[a[u]])throw Error("Can\u2019t round already rounded rectangles (use RoundRect.create)");q[a[u]=++A]=this;this.element=a;this.onPropertyChangeProxy=n.proxy(function(){var d=this,c=window.event.propertyName;setTimeout(function(){d.onPropertyChange.call(d,c)})},this);this.onStateChangeProxy=n.proxy(function(){var d=this,c=window.event.type;setTimeout(function(){d.onStateChange.call(d,c)})},
this);this.onVmlStateChangeProxy=n.proxy(function(){this.onVmlStateChange(window.event.type)},this);n(document).ready(n.proxy(function(){this.render();b&&this.start()},this))}var t="RoundRect",s="rr",u=t+(new Date).getTime(),A=0,q={},z=document.documentMode===8,v={};if(window.attachEvent){y();window.attachEvent("onunload",function(){for(var a in q)if(q.hasOwnProperty(a))try{q[a].destroy()}catch(b){}q=null});o.expando=u;o.disallowed={INPUT:false,BODY:true,TABLE:true,TR:true,TD:true,SELECT:!z,OPTION:true};
o.create=function(a,b){var d=a[u],c;if(d&&(c=q[d])){if(b!==k&&c.dynamic!==b)c.dynamic?c.start():c.stop();return c}return new o(a,b)};o.gc=function(){for(var a in q)if(q.hasOwnProperty(a))q[a].element.parentNode||q[a].destroy()};o.processStyleSheets=function(){function a(j){var i,g;for(i=j.rules.length-1;i>=0;--i){g=j.rules[i];if(g.selectorText.indexOf("."+t+"-hover")!==-1)j.removeRule(i);else g.selectorText.indexOf(":hover")!==-1&&j.addRule(g.selectorText.replace(/:hover/g,"."+t+"-hover"),g.style.cssText,
i+1)}}var b,d,c,e,f;b=0;for(d=document.styleSheets.length;b<d;++b)try{f=document.styleSheets[b];if(f.imports){c=0;for(e=f.imports.length;c<e;++c)try{a(f.imports[c])}catch(h){}}a(f)}catch(l){}};o.run=function(a,b){if(a===k)a=true;a&&o.processStyleSheets();n(document).ready(function(){n("*").each(function(d,c){var e=c.currentStyle,f=c.nodeName.toUpperCase();if(!(f===t.toUpperCase()||o.disallowed[f]||c.scopeName===s))if((e["border-radius"]||e["border-top-left-radius"]||e["border-top-right-radius"]||
e["border-bottom-right-radius"]||e["border-bottom-left-radius"])!==k||a&&b)o.create(c,a)})})};o.prototype={element:k,container:k,dimensions:k,radii:null,borderWidths:k,vml:k,dynamic:false,backgroundImage:null,originalStyles:{},destroy:function(a){var b=this.element[u],d;this.stop();this.element.removeAttribute(u);if(this.vml)for(d in this.vml)if(this.vml.hasOwnProperty(d))this.vml[d].filler=null;if(this.container)if(this.container&&this.container.parentNode){this.container.parentNode.insertBefore(this.element,
this.container);this.container.parentNode.removeChild(this.container)}if(a&&this.originalStyles)for(d in this.originalStyles)if(this.originalStyles.hasOwnProperty(d))this.element.style[d]=this.originalStyles[d];this.element=null;delete q[b]},start:function(){if(!this.dynamic){this.modifyEvents(true);this.dynamic=true}},stop:function(){if(this.dynamic){this.modifyEvents(false);this.dynamic=false}},modifyEvents:function(a){var b=this.element,d=this.container,c=this.onStateChangeProxy,e=this.onVmlStateChangeProxy;
a=a?"attachEvent":"detachEvent";b[a]("onpropertychange",this.onPropertyChangeProxy);b[a]("onmouseenter",c);b[a]("onmouseleave",c);b[a]("onfocus",c);b[a]("onblur",c);b[a]("onresize",c);b[a]("onmove",c);d[a]("onmouseover",e);d[a]("onmouseout",e);d[a]("onclick",e)},onVmlStateChangeProxy:k,onVmlStateChange:function(a){if(a==="click"&&document.activeElement!==this.element&&document.activeElement!==document.body)document.activeElement.blur();else if(a==="mouseover")n(this.element).addClass(t+"-hover");
else a==="mouseout"&&n(this.element).removeClass(t+"-hover")},onPropertyChangeProxy:k,onPropertyChange:function(a){var b=this.element.style,d=this.container.style;switch(a){case "style.display":d.display=b.display==="none"?"none":"block";case "style":case "className":case "style.cssText":this.dimensions=this.calculateDimensions();case "style.border":case "style.borderTop":case "style.borderRight":case "style.borderBottom":case "style.borderLeft":case "style.borderTopWidth":case "style.borderRightWidth":case "style.borderBottomWidth":case "style.borderLeftWidth":case "style.borderWidth":this.borderWidths=
this.calculateBorderWidths();case "style.border-radius":case "style.border-top-left-radius":case "style.border-top-right-radius":case "style.border-bottom-right-radius":case "style.border-bottom-left-radius":this.radii=this.calculateRadii();case "style.padding":case "style.background":case "style.backgroundImage":case "style.backgroundColor":case "style.backgroundPosition":case "style.backgroundRepeat":this.applyVML();break;case "style.borderColor":this.vmlStrokeColor();break;case "style.visibility":d.visibility=
b.visibility;break;case "style.filter":this.vmlOpacity();break;case "style.zIndex":d.zIndex=b.zIndex;break}},onStateChangeProxy:k,onStateChange:function(a){if(a==="resize"||a==="move"){a=this.dimensions;this.dimensions=this.calculateDimensions();if(this.dimensions.width!==a.width||this.dimensions.height!==a.height||this.dimensions.top!==a.top||this.dimensions.left!==a.left){this.vmlOffsets();this.vmlPath()}}else{this.element.runtimeStyle.cssText="";this.dimensions=this.calculateDimensions();this.borderWidths=
this.calculateBorderWidths();this.radii=this.calculateRadii();this.applyVML()}},calculateRadii:function(){var a=this.element.currentStyle,b;if((a["border-radius"]||a["border-top-left-radius"]||a["border-top-right-radius"]||a["border-bottom-right-radius"]||a["border-bottom-left-radius"])===k)return null;b=(a["border-radius"]||"0 0 0 0").split(/\s+\//)[0].replace(/[^0-9\s]/g,"").split(/\s+/);b[0]=(a["border-top-left-radius"]||"").replace(/[^0-9]/g,"")||b[0];b[1]=(a["border-top-right-radius"]||"").replace(/[^0-9]/g,
"")||b[1];b[2]=(a["border-bottom-right-radius"]||"").replace(/[^0-9]/g,"")||b[2];b[3]=(a["border-bottom-left-radius"]||"").replace(/[^0-9]/g,"")||b[3];for(a=0;a<4;++a)b[a]=b[a]===k?+b[Math.max(a-2,0)]:+b[a];if(b[0]+b[1]+b[2]+b[3]===0)return null;return b},calculateDimensions:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight,left:this.element.offsetLeft,top:this.element.offsetTop}},calculateBorderWidths:function(){var a=this.element.currentStyle;return{top:parseInt(a.borderTopWidth,
10)||0,right:parseInt(a.borderRightWidth,10)||0,bottom:parseInt(a.borderBottomWidth,10)||0,left:parseInt(a.borderLeftWidth,10)||0}},render:function(){var a=this.element,b=a.currentStyle,d=a.nodeName.toUpperCase(),c;if(!(!b||o.disallowed[d]||(this.radii=this.calculateRadii())===null)){a.style.behavior="none";this.originalStyles.zoom=a.style.zoom;this.originalStyles.position=a.style.position;this.originalStyles.top=a.style.top;this.originalStyles.right=a.style.right;this.originalStyles.bottom=a.style.bottom;
this.originalStyles.left=a.style.left;this.container=document.createElement(t);this.container.runtimeStyle.cssText="behavior:none;position:absolute;margin:0;padding:0;border:0;background:none;";this.container.style.zIndex=b.zIndex;this.vml={color:null,image:null,stroke:null};for(c in this.vml)if(this.vml.hasOwnProperty(c)){this.vml[c]=document.createElement(s+":shape");this.vml[c].filler=document.createElement(s+":fill");this.vml[c].appendChild(this.vml[c].filler);this.vml[c].stroked=false;this.vml[c].style.position=
"absolute";this.vml[c].style.zIndex=b.zIndex;this.vml[c].coordorigin="1,1";this.container.appendChild(this.vml[c])}this.vml.image.fillcolor="none";this.vml.image.filler.type="tile";a.parentNode.insertBefore(this.container,a);(function(){for(var e,f=0,h=arguments.length;f<h;++f){e=arguments[f];e.style.zoom=1;if(e.currentStyle.position==="static"){e.style.position="relative";e.style.top="auto";e.style.right="auto";e.style.bottom="auto";e.style.left="auto"}}})(a.offsetParent,a,this.container);if(d===
"IMG")a.style.visibility="hidden";else if(d==="INPUT"||d==="TEXTAREA"){this.container.style.cursor=b.cursor==="auto"?"text":b.cursor;this.container.attachEvent("onclick",n.proxy(function(){var e=this.element.createTextRange();e.moveStart("textedit");e.select()},this))}setTimeout(n.proxy(function(){this.container.attachEvent("onmouseenter",n.proxy(function(){var e=document.createEventObject(window.event);e.toElement=e.srcElement=this.element;this.element.fireEvent("on"+window.event.type,e)},this));
this.container.attachEvent("onmouseleave",n.proxy(function(){var e=document.createEventObject(window.event);e.fromElement=e.srcElement=this.element;this.element.fireEvent("on"+window.event.type,e)},this));this.dimensions=this.calculateDimensions();this.borderWidths=this.calculateBorderWidths();this.applyVML()},this))}},applyVML:function(){if(this.dimensions.width===0||this.dimensions.height===0)this.dimensions=this.calculateDimensions();if(!(this.dimensions.width===0||this.dimensions.height===0)){this.element.runtimeStyle.cssText=
"";this.vmlFill();this.vmlStrokeColor();this.vmlOffsets();this.vmlPath();this.padBorder();this.vmlOpacity()}},vmlOpacity:function(){var a,b=this.vml;if(a=/Opacity=([0-9]+)/i.exec(this.element.currentStyle.filter)){a=+a[1]*0.01;for(var d in b)if(b.hasOwnProperty(d))b[d].filler.opacity=a}},vmlStrokeColor:function(){this.vml.stroke.fillcolor=this.element.currentStyle.borderColor},vmlOffsets:function(){function a(f,h){f.style.left=(h?0:b.left)+"px";f.style.top=(h?0:b.top)+"px";f.style.width=b.width+"px";
f.style.height=b.height+"px"}var b=this.dimensions,d,c=this.vml,e;for(d in c)if(c.hasOwnProperty(d)){e=d==="image"?1:2;c[d].coordsize=b.width*e+","+b.height*e;a(c[d],true)}a(this.container,false)},vmlPath:function(){function a(l,j,i,g,p,m,x){var r=l?["m","qy","l","qx","l","qy","l","qx","l"]:["qx","l","qy","l","qx","l","qy","l","m"];g=g.slice();var w;p*=x;m*=x;j*=x;i*=x;for(w=0;w<4;++w){g[w]*=x;g[w]=Math.min(j*0.5,i*0.5,g[w])}j=[r[0]+Math.floor(0+p)+","+Math.floor(g[0]+m),r[1]+Math.floor(g[0]+p)+","+
Math.floor(0+m),r[2]+Math.ceil(j-g[1]+p)+","+Math.floor(0+m),r[3]+Math.ceil(j+p)+","+Math.floor(g[1]+m),r[4]+Math.ceil(j+p)+","+Math.ceil(i-g[2]+m),r[5]+Math.ceil(j-g[2]+p)+","+Math.ceil(i+m),r[6]+Math.floor(g[3]+p)+","+Math.ceil(i+m),r[7]+Math.floor(0+p)+","+Math.ceil(i-g[3]+m),r[8]+Math.floor(0+p)+","+Math.floor(g[0]+m)];l||j.reverse();return j.join("")}var b=this.borderWidths,d=this.dimensions,c=this.radii.slice(),e=this.vml,f;if(b===k)b=this.calculateBorderWidths();var h=a(true,d.width,d.height,
c,0,0,2);c[0]-=Math.max(b.left,b.top);c[1]-=Math.max(b.top,b.right);c[2]-=Math.max(b.right,b.bottom);c[3]-=Math.max(b.bottom,b.left);for(f=0;f<4;++f)c[f]=Math.max(c[f],0);f=a(false,d.width-b.left-b.right,d.height-b.top-b.bottom,c,b.left,b.top,2);b=a(true,d.width-b.left-b.right+1,d.height-b.top-b.bottom+1,c,b.left,b.top,1);e.color.path=f;e.image.path=b;e.stroke.path=h+f;this.clipImage()},padBorder:function(){var a=this.element,b=a.currentStyle,d=["Top","Right","Bottom","Left"],c;for(c=0;c<4;++c)a.runtimeStyle["padding"+
d[c]]=(parseInt(b["padding"+d[c]],10)||0)+(parseInt(b["border"+d[c]+"Width"],10)||0)+"px";a.runtimeStyle.border="none"},vmlFill:function(){var a=this.element,b=a.currentStyle,d=this.element.tagName.toUpperCase()==="IMG",c=this.vml,e;a.runtimeStyle.backgroundColor="";a.runtimeStyle.backgroundImage="";if(d||b.backgroundImage!=="none"){this.backgroundImage=e=d?a.src:/^url\(["']?\s*(.+?)\s*["']?\)$/.exec(b.backgroundImage)[1];if(v[e]===k){d=new Image;d.attachEvent("onload",n.proxy(function(){v[e]={width:this.width,
height:this.height};this.vmlOffsets()},this));d.src=e;v[e]=d}c.image.filler.src=e;d=true}c.image.filled=d;c.image.fillcolor="none";c.color.filled=b.backgroundColor!=="transparent";c.color.fillcolor=b.backgroundColor;a.runtimeStyle.backgroundImage="none";a.runtimeStyle.backgroundColor="transparent"},clipImage:function(){function a(i,g){var p=true;switch(g){case "left":case "top":h[i]=0;break;case "center":h[i]=0.5;break;case "right":case "bottom":h[i]=1;break;default:if(g.indexOf("%")!==-1)h[i]=parseInt(g,
10)*0.01;else p=false;break}var m=i==="X";h[i]=Math.ceil(p?(c[m?"width":"height"]-(e[m?"left":"top"]+e[m?"right":"bottom"]))*h[i]-v[d][m?"width":"height"]*h[i]:parseInt(g,10));h[i]+=1}var b=this.element.currentStyle,d=this.backgroundImage,c=this.calculateDimensions(),e=this.calculateBorderWidths(),f=this.vml;if(!(d===k||v[d]===k)){var h={X:0,Y:0};for(var l in h)h.hasOwnProperty(l)&&a(l,b["backgroundPosition"+l]);f.image.filler.position=h.X/(c.width-e.left-e.right+1)+","+h.Y/(c.height-e.top-e.bottom+
1);l={T:1,R:c.width+1,B:c.height+1,L:1};var j={X:{b1:"L",b2:"R",d:"Width"},Y:{b1:"T",b2:"B",d:"Height"}};if(b.backgroundRepeat!=="repeat"){l={T:h.Y,R:h.X+v[d].width,B:h.Y+v[d].height,L:h.X};if(b.backgroundRepeat.indexOf("repeat-")!==-1){b=b.backgroundRepeat.split("repeat-")[1].toUpperCase();l[j[b].b1]=1;l[j[b].b2]=c[j[b].d.toLowerCase()]+1}}f.image.style.clip="rect("+l.T+"px "+l.R+"px "+l.B+"px "+l.L+"px)"}}};window[t]=o}})(jQuery);
